<!DOCTYPE html>
<!--
    Copyright (c) 2019 Vinnie Falco (vinnie.falco@gmail.com)

    Distributed under the Boost Software License, Version 1.0. (See accompanying
    file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

    Official repository: https://github.com/vinniefalco/json
-->
<html>
<head>
<font face="arial"/>
</head>
<body>
<h1>Boost.JSON Benchmarks</h1>
<div id="benchmarks">
</div>
<br>
<textarea id="data" cols="60" rows="20" overflow="hidden" onkeyup="autosize(this)">
Parse strings.json,clang x64/sse2,boost (pool),5775
Parse strings.json,clang x64/sse2,boost,2977
Parse strings.json,clang x64/sse2,rapidjson (pool),448
Parse strings.json,clang x64/sse2,rapidjson,420
Parse strings.json,clang x64/sse2,nlohmann,226
Parse integers-32.json,clang x64/sse2,boost (pool),400
Parse integers-32.json,clang x64/sse2,boost,369
Parse integers-32.json,clang x64/sse2,rapidjson (pool),274
Parse integers-32.json,clang x64/sse2,rapidjson,263
Parse integers-32.json,clang x64/sse2,nlohmann,89
Parse integers-64.json,clang x64/sse2,boost (pool),678
Parse integers-64.json,clang x64/sse2,boost,629
Parse integers-64.json,clang x64/sse2,rapidjson (pool),399
Parse integers-64.json,clang x64/sse2,rapidjson,385
Parse integers-64.json,clang x64/sse2,nlohmann,109
Parse twitter.json,clang x64/sse2,boost (pool),475
Parse twitter.json,clang x64/sse2,boost,233
Parse twitter.json,clang x64/sse2,rapidjson (pool),431
Parse twitter.json,clang x64/sse2,rapidjson,267
Parse twitter.json,clang x64/sse2,nlohmann,91
Parse small.json,clang x64/sse2,boost (pool),297
Parse small.json,clang x64/sse2,boost,176
Parse small.json,clang x64/sse2,rapidjson (pool),311
Parse small.json,clang x64/sse2,rapidjson,283
Parse small.json,clang x64/sse2,nlohmann,67
Parse array.json,clang x64/sse2,boost (pool),268
Parse array.json,clang x64/sse2,boost,242
Parse array.json,clang x64/sse2,rapidjson (pool),258
Parse array.json,clang x64/sse2,rapidjson,252
Parse array.json,clang x64/sse2,nlohmann,78
Parse random.json,clang x64/sse2,boost (pool),336
Parse random.json,clang x64/sse2,boost,196
Parse random.json,clang x64/sse2,rapidjson (pool),393
Parse random.json,clang x64/sse2,rapidjson,381
Parse random.json,clang x64/sse2,nlohmann,65
Parse citm_catalog.json,clang x64/sse2,boost (pool),622
Parse citm_catalog.json,clang x64/sse2,boost,306
Parse citm_catalog.json,clang x64/sse2,rapidjson (pool),826
Parse citm_catalog.json,clang x64/sse2,rapidjson,521
Parse citm_catalog.json,clang x64/sse2,nlohmann,109
Parse canada.json,clang x64/sse2,boost (pool),396
Parse canada.json,clang x64/sse2,boost,236
Parse canada.json,clang x64/sse2,rapidjson (pool),355
Parse canada.json,clang x64/sse2,rapidjson,229
Parse canada.json,clang x64/sse2,nlohmann,39

Parse strings.json,msvc x64/sse2,boost (pool),5231
Parse strings.json,msvc x64/sse2,boost,2811
Parse strings.json,msvc x64/sse2,rapidjson (pool),241
Parse strings.json,msvc x64/sse2,rapidjson,226
Parse strings.json,msvc x64/sse2,nlohmann,145
Parse integers-32.json,msvc x64/sse2,boost (pool),336
Parse integers-32.json,msvc x64/sse2,boost,316
Parse integers-32.json,msvc x64/sse2,rapidjson (pool),273
Parse integers-32.json,msvc x64/sse2,rapidjson,260
Parse integers-32.json,msvc x64/sse2,nlohmann,70
Parse integers-64.json,msvc x64/sse2,boost (pool),563
Parse integers-64.json,msvc x64/sse2,boost,531
Parse integers-64.json,msvc x64/sse2,rapidjson (pool),396
Parse integers-64.json,msvc x64/sse2,rapidjson,380
Parse integers-64.json,msvc x64/sse2,nlohmann,80
Parse twitter.json,msvc x64/sse2,boost (pool),347
Parse twitter.json,msvc x64/sse2,boost,191
Parse twitter.json,msvc x64/sse2,rapidjson (pool),271
Parse twitter.json,msvc x64/sse2,rapidjson,203
Parse twitter.json,msvc x64/sse2,nlohmann,77
Parse small.json,msvc x64/sse2,boost (pool),232
Parse small.json,msvc x64/sse2,boost,141
Parse small.json,msvc x64/sse2,rapidjson (pool),225
Parse small.json,msvc x64/sse2,rapidjson,205
Parse small.json,msvc x64/sse2,nlohmann,55
Parse array.json,msvc x64/sse2,boost (pool),229
Parse array.json,msvc x64/sse2,boost,208
Parse array.json,msvc x64/sse2,rapidjson (pool),228
Parse array.json,msvc x64/sse2,rapidjson,215
Parse array.json,msvc x64/sse2,nlohmann,65
Parse random.json,msvc x64/sse2,boost (pool),233
Parse random.json,msvc x64/sse2,boost,153
Parse random.json,msvc x64/sse2,rapidjson (pool),271
Parse random.json,msvc x64/sse2,rapidjson,256
Parse random.json,msvc x64/sse2,nlohmann,58
Parse citm_catalog.json,msvc x64/sse2,boost (pool),452
Parse citm_catalog.json,msvc x64/sse2,boost,262
Parse citm_catalog.json,msvc x64/sse2,rapidjson (pool),719
Parse citm_catalog.json,msvc x64/sse2,rapidjson,456
Parse citm_catalog.json,msvc x64/sse2,nlohmann,95
Parse canada.json,msvc x64/sse2,boost (pool),309
Parse canada.json,msvc x64/sse2,boost,176
Parse canada.json,msvc x64/sse2,rapidjson (pool),345
Parse canada.json,msvc x64/sse2,rapidjson,228
Parse canada.json,msvc x64/sse2,nlohmann,34

Parse strings.json,clang x86/sse2,boost (pool),2720
Parse strings.json,clang x86/sse2,boost,2792
Parse strings.json,clang x86/sse2,rapidjson (pool),462
Parse strings.json,clang x86/sse2,rapidjson,430
Parse strings.json,clang x86/sse2,nlohmann,219
Parse integers-32.json,clang x86/sse2,boost (pool),332
Parse integers-32.json,clang x86/sse2,boost,316
Parse integers-32.json,clang x86/sse2,rapidjson (pool),220
Parse integers-32.json,clang x86/sse2,rapidjson,212
Parse integers-32.json,clang x86/sse2,nlohmann,68
Parse integers-64.json,clang x86/sse2,boost (pool),421
Parse integers-64.json,clang x86/sse2,boost,404
Parse integers-64.json,clang x86/sse2,rapidjson (pool),318
Parse integers-64.json,clang x86/sse2,rapidjson,311
Parse integers-64.json,clang x86/sse2,nlohmann,78
Parse twitter.json,clang x86/sse2,boost (pool),416
Parse twitter.json,clang x86/sse2,boost,198
Parse twitter.json,clang x86/sse2,rapidjson (pool),401
Parse twitter.json,clang x86/sse2,rapidjson,241
Parse twitter.json,clang x86/sse2,nlohmann,79
Parse small.json,clang x86/sse2,boost (pool),261
Parse small.json,clang x86/sse2,boost,147
Parse small.json,clang x86/sse2,rapidjson (pool),274
Parse small.json,clang x86/sse2,rapidjson,255
Parse small.json,clang x86/sse2,nlohmann,58
Parse array.json,clang x86/sse2,boost (pool),227
Parse array.json,clang x86/sse2,boost,188
Parse array.json,clang x86/sse2,rapidjson (pool),194
Parse array.json,clang x86/sse2,rapidjson,188
Parse array.json,clang x86/sse2,nlohmann,62
Parse random.json,clang x86/sse2,boost (pool),315
Parse random.json,clang x86/sse2,boost,169
Parse random.json,clang x86/sse2,rapidjson (pool),357
Parse random.json,clang x86/sse2,rapidjson,351
Parse random.json,clang x86/sse2,nlohmann,58
Parse citm_catalog.json,clang x86/sse2,boost (pool),530
Parse citm_catalog.json,clang x86/sse2,boost,268
Parse citm_catalog.json,clang x86/sse2,rapidjson (pool),789
Parse citm_catalog.json,clang x86/sse2,rapidjson,481
Parse citm_catalog.json,clang x86/sse2,nlohmann,97
Parse canada.json,clang x86/sse2,boost (pool),251
Parse canada.json,clang x86/sse2,boost,177
Parse canada.json,clang x86/sse2,rapidjson (pool),336
Parse canada.json,clang x86/sse2,rapidjson,210
Parse canada.json,clang x86/sse2,nlohmann,29

Parse strings.json,msvc x86/sse2,boost (pool),2575
Parse strings.json,msvc x86/sse2,boost,2709
Parse strings.json,msvc x86/sse2,rapidjson (pool),300
Parse strings.json,msvc x86/sse2,rapidjson,311
Parse strings.json,msvc x86/sse2,nlohmann,141
Parse integers-32.json,msvc x86/sse2,boost (pool),326
Parse integers-32.json,msvc x86/sse2,boost,306
Parse integers-32.json,msvc x86/sse2,rapidjson (pool),201
Parse integers-32.json,msvc x86/sse2,rapidjson,198
Parse integers-32.json,msvc x86/sse2,nlohmann,55
Parse integers-64.json,msvc x86/sse2,boost (pool),390
Parse integers-64.json,msvc x86/sse2,boost,372
Parse integers-64.json,msvc x86/sse2,rapidjson (pool),262
Parse integers-64.json,msvc x86/sse2,rapidjson,259
Parse integers-64.json,msvc x86/sse2,nlohmann,63
Parse twitter.json,msvc x86/sse2,boost (pool),357
Parse twitter.json,msvc x86/sse2,boost,181
Parse twitter.json,msvc x86/sse2,rapidjson (pool),282
Parse twitter.json,msvc x86/sse2,rapidjson,207
Parse twitter.json,msvc x86/sse2,nlohmann,72
Parse small.json,msvc x86/sse2,boost (pool),227
Parse small.json,msvc x86/sse2,boost,131
Parse small.json,msvc x86/sse2,rapidjson (pool),221
Parse small.json,msvc x86/sse2,rapidjson,214
Parse small.json,msvc x86/sse2,nlohmann,54
Parse array.json,msvc x86/sse2,boost (pool),214
Parse array.json,msvc x86/sse2,boost,175
Parse array.json,msvc x86/sse2,rapidjson (pool),169
Parse array.json,msvc x86/sse2,rapidjson,168
Parse array.json,msvc x86/sse2,nlohmann,56
Parse random.json,msvc x86/sse2,boost (pool),248
Parse random.json,msvc x86/sse2,boost,144
Parse random.json,msvc x86/sse2,rapidjson (pool),257
Parse random.json,msvc x86/sse2,rapidjson,257
Parse random.json,msvc x86/sse2,nlohmann,53
Parse citm_catalog.json,msvc x86/sse2,boost (pool),429
Parse citm_catalog.json,msvc x86/sse2,boost,240
Parse citm_catalog.json,msvc x86/sse2,rapidjson (pool),655
Parse citm_catalog.json,msvc x86/sse2,rapidjson,432
Parse citm_catalog.json,msvc x86/sse2,nlohmann,90
Parse canada.json,msvc x86/sse2,boost (pool),248
Parse canada.json,msvc x86/sse2,boost,166
Parse canada.json,msvc x86/sse2,rapidjson (pool),227
Parse canada.json,msvc x86/sse2,rapidjson,161
Parse canada.json,msvc x86/sse2,nlohmann,26

Serialize strings.json,clang x64/sse2,boost (pool),7682
Serialize strings.json,clang x64/sse2,boost,7436
Serialize strings.json,clang x64/sse2,rapidjson (pool),6400
Serialize strings.json,clang x64/sse2,rapidjson,6291
Serialize strings.json,clang x64/sse2,nlohmann,261
Serialize integers-32.json,clang x64/sse2,boost (pool),697
Serialize integers-32.json,clang x64/sse2,boost,697
Serialize integers-32.json,clang x64/sse2,rapidjson (pool),665
Serialize integers-32.json,clang x64/sse2,rapidjson,670
Serialize integers-32.json,clang x64/sse2,nlohmann,529
Serialize integers-64.json,clang x64/sse2,boost (pool),1044
Serialize integers-64.json,clang x64/sse2,boost,1046
Serialize integers-64.json,clang x64/sse2,rapidjson (pool),996
Serialize integers-64.json,clang x64/sse2,rapidjson,986
Serialize integers-64.json,clang x64/sse2,nlohmann,488
Serialize twitter.json,clang x64/sse2,boost (pool),1709
Serialize twitter.json,clang x64/sse2,boost,1644
Serialize twitter.json,clang x64/sse2,rapidjson (pool),1039
Serialize twitter.json,clang x64/sse2,rapidjson,1145
Serialize twitter.json,clang x64/sse2,nlohmann,307
Serialize small.json,clang x64/sse2,boost (pool),1693
Serialize small.json,clang x64/sse2,boost,1688
Serialize small.json,clang x64/sse2,rapidjson (pool),820
Serialize small.json,clang x64/sse2,rapidjson,846
Serialize small.json,clang x64/sse2,nlohmann,253
Serialize array.json,clang x64/sse2,boost (pool),459
Serialize array.json,clang x64/sse2,boost,458
Serialize array.json,clang x64/sse2,rapidjson (pool),376
Serialize array.json,clang x64/sse2,rapidjson,380
Serialize array.json,clang x64/sse2,nlohmann,265
Serialize random.json,clang x64/sse2,boost (pool),1166
Serialize random.json,clang x64/sse2,boost,1159
Serialize random.json,clang x64/sse2,rapidjson (pool),660
Serialize random.json,clang x64/sse2,rapidjson,658
Serialize random.json,clang x64/sse2,nlohmann,307
Serialize citm_catalog.json,clang x64/sse2,boost (pool),2243
Serialize citm_catalog.json,clang x64/sse2,boost,2147
Serialize citm_catalog.json,clang x64/sse2,rapidjson (pool),1676
Serialize citm_catalog.json,clang x64/sse2,rapidjson,1688
Serialize citm_catalog.json,clang x64/sse2,nlohmann,823
Serialize canada.json,clang x64/sse2,boost (pool),452
Serialize canada.json,clang x64/sse2,boost,431
Serialize canada.json,clang x64/sse2,rapidjson (pool),247
Serialize canada.json,clang x64/sse2,rapidjson,236
Serialize canada.json,clang x64/sse2,nlohmann,124

Serialize strings.json,msvc x64/sse2,boost (pool),6511
Serialize strings.json,msvc x64/sse2,boost,6330
Serialize strings.json,msvc x64/sse2,rapidjson (pool),6230
Serialize strings.json,msvc x64/sse2,rapidjson,6231
Serialize strings.json,msvc x64/sse2,nlohmann,116
Serialize integers-32.json,msvc x64/sse2,boost (pool),661
Serialize integers-32.json,msvc x64/sse2,boost,660
Serialize integers-32.json,msvc x64/sse2,rapidjson (pool),616
Serialize integers-32.json,msvc x64/sse2,rapidjson,613
Serialize integers-32.json,msvc x64/sse2,nlohmann,399
Serialize integers-64.json,msvc x64/sse2,boost (pool),785
Serialize integers-64.json,msvc x64/sse2,boost,784
Serialize integers-64.json,msvc x64/sse2,rapidjson (pool),726
Serialize integers-64.json,msvc x64/sse2,rapidjson,727
Serialize integers-64.json,msvc x64/sse2,nlohmann,578
Serialize twitter.json,msvc x64/sse2,boost (pool),1112
Serialize twitter.json,msvc x64/sse2,boost,1077
Serialize twitter.json,msvc x64/sse2,rapidjson (pool),877
Serialize twitter.json,msvc x64/sse2,rapidjson,947
Serialize twitter.json,msvc x64/sse2,nlohmann,248
Serialize small.json,msvc x64/sse2,boost (pool),1051
Serialize small.json,msvc x64/sse2,boost,1046
Serialize small.json,msvc x64/sse2,rapidjson (pool),750
Serialize small.json,msvc x64/sse2,rapidjson,758
Serialize small.json,msvc x64/sse2,nlohmann,207
Serialize array.json,msvc x64/sse2,boost (pool),402
Serialize array.json,msvc x64/sse2,boost,401
Serialize array.json,msvc x64/sse2,rapidjson (pool),333
Serialize array.json,msvc x64/sse2,rapidjson,327
Serialize array.json,msvc x64/sse2,nlohmann,212
Serialize random.json,msvc x64/sse2,boost (pool),720
Serialize random.json,msvc x64/sse2,boost,722
Serialize random.json,msvc x64/sse2,rapidjson (pool),563
Serialize random.json,msvc x64/sse2,rapidjson,554
Serialize random.json,msvc x64/sse2,nlohmann,237
Serialize citm_catalog.json,msvc x64/sse2,boost (pool),1583
Serialize citm_catalog.json,msvc x64/sse2,boost,1592
Serialize citm_catalog.json,msvc x64/sse2,rapidjson (pool),1617
Serialize citm_catalog.json,msvc x64/sse2,rapidjson,1622
Serialize citm_catalog.json,msvc x64/sse2,nlohmann,709
Serialize canada.json,msvc x64/sse2,boost (pool),351
Serialize canada.json,msvc x64/sse2,boost,339
Serialize canada.json,msvc x64/sse2,rapidjson (pool),239
Serialize canada.json,msvc x64/sse2,rapidjson,224
Serialize canada.json,msvc x64/sse2,nlohmann,92

Serialize strings.json,clang x86/sse2,boost (pool),7057
Serialize strings.json,clang x86/sse2,boost,6420
Serialize strings.json,clang x86/sse2,rapidjson (pool),6347
Serialize strings.json,clang x86/sse2,rapidjson,6006
Serialize strings.json,clang x86/sse2,nlohmann,158
Serialize integers-32.json,clang x86/sse2,boost (pool),358
Serialize integers-32.json,clang x86/sse2,boost,358
Serialize integers-32.json,clang x86/sse2,rapidjson (pool),434
Serialize integers-32.json,clang x86/sse2,rapidjson,434
Serialize integers-32.json,clang x86/sse2,nlohmann,169
Serialize integers-64.json,clang x86/sse2,boost (pool),324
Serialize integers-64.json,clang x86/sse2,boost,324
Serialize integers-64.json,clang x86/sse2,rapidjson (pool),328
Serialize integers-64.json,clang x86/sse2,rapidjson,328
Serialize integers-64.json,clang x86/sse2,nlohmann,162
Serialize twitter.json,clang x86/sse2,boost (pool),1015
Serialize twitter.json,clang x86/sse2,boost,997
Serialize twitter.json,clang x86/sse2,rapidjson (pool),987
Serialize twitter.json,clang x86/sse2,rapidjson,973
Serialize twitter.json,clang x86/sse2,nlohmann,220
Serialize small.json,clang x86/sse2,boost (pool),1032
Serialize small.json,clang x86/sse2,boost,1030
Serialize small.json,clang x86/sse2,rapidjson (pool),809
Serialize small.json,clang x86/sse2,rapidjson,786
Serialize small.json,clang x86/sse2,nlohmann,194
Serialize array.json,clang x86/sse2,boost (pool),254
Serialize array.json,clang x86/sse2,boost,254
Serialize array.json,clang x86/sse2,rapidjson (pool),283
Serialize array.json,clang x86/sse2,rapidjson,281
Serialize array.json,clang x86/sse2,nlohmann,159
Serialize random.json,clang x86/sse2,boost (pool),546
Serialize random.json,clang x86/sse2,boost,548
Serialize random.json,clang x86/sse2,rapidjson (pool),527
Serialize random.json,clang x86/sse2,rapidjson,526
Serialize random.json,clang x86/sse2,nlohmann,214
Serialize citm_catalog.json,clang x86/sse2,boost (pool),1323
Serialize citm_catalog.json,clang x86/sse2,boost,1286
Serialize citm_catalog.json,clang x86/sse2,rapidjson (pool),1625
Serialize citm_catalog.json,clang x86/sse2,rapidjson,1605
Serialize citm_catalog.json,clang x86/sse2,nlohmann,459
Serialize canada.json,clang x86/sse2,boost (pool),123
Serialize canada.json,clang x86/sse2,boost,121
Serialize canada.json,clang x86/sse2,rapidjson (pool),148
Serialize canada.json,clang x86/sse2,rapidjson,145
Serialize canada.json,clang x86/sse2,nlohmann,72

Serialize strings.json,msvc x86/sse2,boost (pool),6746
Serialize strings.json,msvc x86/sse2,boost,6144
Serialize strings.json,msvc x86/sse2,rapidjson (pool),5834
Serialize strings.json,msvc x86/sse2,rapidjson,5569
Serialize strings.json,msvc x86/sse2,nlohmann,104
Serialize integers-32.json,msvc x86/sse2,boost (pool),444
Serialize integers-32.json,msvc x86/sse2,boost,444
Serialize integers-32.json,msvc x86/sse2,rapidjson (pool),514
Serialize integers-32.json,msvc x86/sse2,rapidjson,514
Serialize integers-32.json,msvc x86/sse2,nlohmann,186
Serialize integers-64.json,msvc x86/sse2,boost (pool),346
Serialize integers-64.json,msvc x86/sse2,boost,345
Serialize integers-64.json,msvc x86/sse2,rapidjson (pool),355
Serialize integers-64.json,msvc x86/sse2,rapidjson,355
Serialize integers-64.json,msvc x86/sse2,nlohmann,200
Serialize twitter.json,msvc x86/sse2,boost (pool),1052
Serialize twitter.json,msvc x86/sse2,boost,1029
Serialize twitter.json,msvc x86/sse2,rapidjson (pool),796
Serialize twitter.json,msvc x86/sse2,rapidjson,770
Serialize twitter.json,msvc x86/sse2,nlohmann,200
Serialize small.json,msvc x86/sse2,boost (pool),1033
Serialize small.json,msvc x86/sse2,boost,1027
Serialize small.json,msvc x86/sse2,rapidjson (pool),697
Serialize small.json,msvc x86/sse2,rapidjson,707
Serialize small.json,msvc x86/sse2,nlohmann,188
Serialize array.json,msvc x86/sse2,boost (pool),278
Serialize array.json,msvc x86/sse2,boost,277
Serialize array.json,msvc x86/sse2,rapidjson (pool),244
Serialize array.json,msvc x86/sse2,rapidjson,244
Serialize array.json,msvc x86/sse2,nlohmann,140
Serialize random.json,msvc x86/sse2,boost (pool),563
Serialize random.json,msvc x86/sse2,boost,562
Serialize random.json,msvc x86/sse2,rapidjson (pool),406
Serialize random.json,msvc x86/sse2,rapidjson,406
Serialize random.json,msvc x86/sse2,nlohmann,189
Serialize citm_catalog.json,msvc x86/sse2,boost (pool),1520
Serialize citm_catalog.json,msvc x86/sse2,boost,1471
Serialize citm_catalog.json,msvc x86/sse2,rapidjson (pool),1549
Serialize citm_catalog.json,msvc x86/sse2,rapidjson,1524
Serialize citm_catalog.json,msvc x86/sse2,nlohmann,507
Serialize canada.json,msvc x86/sse2,boost (pool),157
Serialize canada.json,msvc x86/sse2,boost,153
Serialize canada.json,msvc x86/sse2,rapidjson (pool),106
Serialize canada.json,msvc x86/sse2,rapidjson,102
Serialize canada.json,msvc x86/sse2,nlohmann,51

</textarea>

<script>

var Width = 600;

function autosize (f) {
  if (f.scrollHeight > f.clientHeight) {
    f.style.height = f.scrollHeight + "px";
  }
}

// Draw a single bar chart representing
// results for one platform and architecture
function draw_chart(ctx, title, rows, mbsMax) {
    var xMax = Math.max(...Object.values(rows));

    // gray separator
    ctx.beginPath();
    ctx.strokeStyle = "#A0A0A0";
    ctx.moveTo(0, 0.5);
    ctx.lineTo(Width, 0.5);
    ctx.stroke();
    ctx.translate(0, 28);

    // title
    ctx.textAlign = "left";
    ctx.fillStyle = "#000000";
    ctx.font = 'bold 16px sans-serif';
    ctx.fillText(title, 0, 0);
    ctx.translate(0, 26);

    // chart rows
    Object.entries(rows).forEach(([name, mbs]) =>
    {
        var dy = 4;

        ctx.textAlign = "left";
        ctx.fillStyle = "#000000";
        ctx.font = '14px sans-serif';
        ctx.fillText(name, 0, 0);

        var xMbs = 195;
        if(name.startsWith("boost"))
            ctx.fillStyle = "#eb342a";
        else
            ctx.fillStyle = "#909090";
        var w = (Width - 170) * mbs / mbsMax
        if(w < xMbs - 120)
            w = xMbs - 120;
        ctx.fillRect(130, -20+dy, w, 20);

        ctx.textAlign = "right";
        ctx.font = '13px sans-serif';
        ctx.fillStyle = "#000000";
        ctx.fillText(mbs + " MB/s", xMbs + 1, 1);
        ctx.fillStyle = "#ffffff";
        ctx.fillText(mbs + " MB/s", xMbs, 0);

        ctx.translate(0, 24);
    });

    // gray separator
    ctx.translate(0, -4);
    ctx.beginPath();
    ctx.strokeStyle = "#A0A0A0";
    ctx.moveTo(0, 0.5);
    ctx.lineTo(Width, 0.5);
    ctx.stroke();
}

// Draw multiple bar charts, one
// for each platform and architecture
function draw_charts(ctx, tab, mbsMax) {
    // top margin
    ctx.translate(0, 16);

    // draw each chart
    Object.entries(tab).forEach(([name, rows]) =>
    {
        draw_chart(ctx, name, rows, mbsMax);
    });

    // bottom margin
    ctx.translate(0, 16);
}

function measure_and_draw(canvas, tab) {
    mbsMax = 0;
    Object.entries(tab).forEach(([name, rows]) =>
    {
        mbsMax = Math.max(mbsMax, ...Object.values(rows));
    });

    var LeftMargin = 48;

    // Measure the height needed
    canvas.width = Width;
    canvas.height = 30000;
    var ctx = canvas.getContext("2d");
    ctx.save();
    draw_charts(ctx, tab);
    var tx = ctx.getTransform();
    var height = tx["f"];

    // Resize the canvas to fit
    canvas.width = LeftMargin + Width + 20;
    canvas.height = height;

    // Make everything opaque
    ctx.fillStyle = "#FFFFFF";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.translate(LeftMargin, 0);
    draw_charts(ctx, tab, mbsMax);
    ctx.restore();
}

function update()
{
    var tab = new Object();
    var lines = data.value.split('\n');
    for (var i = 0; i < lines.length; i++)
    {
        if(lines[i].length == 0)
            continue;
        items = lines[i].split(',');
        var title = items[0]
        var target = items[1];
        var name = items[2];
        var mbs = items[3];
        if(! (title in tab))
            tab[title] = new Object();
        if(! (target in tab[title]))
            tab[title][target] = new Object();
        var set = tab[title][target];
        if(! (name in set))
            set[name] = new Object();           
        set[name] = mbs;
    }

    benchmarks.innerHTML = "";
    Object.entries(tab).forEach(([title, charts]) =>
    {
        benchmarks.innerHTML +=
            "<h2>" + title + "</h2>" +
            "<canvas id=\"" + title + "\" width=\"800\" height=\"600\">";
    });
    Object.entries(tab).forEach(([title, charts]) =>
    {
        measure_and_draw(document.getElementById(title), charts)
    });
}

data.oninput = function()
{
    update();
}

update();

</script>
</body>
</html>
